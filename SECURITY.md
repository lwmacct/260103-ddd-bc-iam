# Security Policy

<!--TOC-->

## Table of Contents

- [支持的版本](#支持的版本) `:23+8`
- [报告漏洞](#报告漏洞) `:31+20`
  - [报告流程](#报告流程) `:35+8`
  - [报告应包含](#报告应包含) `:43+8`
- [安全最佳实践](#安全最佳实践) `:51+55`
  - [生产部署](#生产部署) `:53+36`
  - [开发环境](#开发环境) `:89+17`
- [已知安全考虑](#已知安全考虑) `:106+36`
  - [JWT Token](#jwt-token) `:108+12`
  - [密码存储](#密码存储) `:120+11`
  - [数据库](#数据库) `:131+11`
- [安全更新](#安全更新) `:142+7`
- [致谢](#致谢) `:149+7`

<!--TOC-->

## 支持的版本

当前支持以下版本的安全更新：

| 版本  | 支持状态           |
| ----- | ------------------ |
| 0.1.x | :white_check_mark: |

## 报告漏洞

如果你发现了安全漏洞，请**不要**通过公开 Issue 报告。

### 报告流程

1. **发送邮件** - 将漏洞详情发送至项目维护者邮箱
2. **等待确认** - 我们会在 48 小时内回复确认
3. **协同修复** - 与我们合作制定修复方案
4. **发布补丁** - 我们会尽快发布安全补丁
5. **公开致谢** - 修复后会在更新日志中感谢你的贡献

### 报告应包含

- 漏洞描述
- 影响范围
- 复现步骤
- 可能的修复建议
- 你的联系方式

## 安全最佳实践

### 生产部署

在生产环境部署时，请遵循以下安全建议：

1. **更改默认密钥**

   ```bash
   # 生成强随机密钥
   export APP_JWT_SECRET=$(openssl rand -base64 32)
   ```

2. **使用 HTTPS**
   - 在生产环境必须启用 HTTPS
   - 使用可信的 SSL/TLS 证书

3. **环境变量保护**
   - 不要在代码中硬编码密钥
   - 使用环境变量或密钥管理服务
   - 不要提交 `.env` 文件到 Git

4. **数据库安全**
   - 使用强密码
   - 启用 SSL 连接
   - 限制数据库访问 IP
   - 定期备份数据

5. **Redis 安全**
   - 设置密码
   - 绑定到内部网络
   - 禁用危险命令

6. **定期更新**
   - 保持依赖库最新
   - 关注安全公告
   - 定期运行安全扫描

### 开发环境

开发环境的安全建议：

1. 不要使用生产环境的密钥
2. 使用 `.gitignore` 排除敏感文件
3. 定期更新依赖包
4. 运行安全检查工具

```bash
# 检查依赖漏洞
go list -json -m all | nancy sleuth

# 运行安全扫描
gosec ./...
```

## 已知安全考虑

### JWT Token

- Access Token 有效期：15 分钟
- Refresh Token 有效期：7 天
- Token 使用 HMAC-SHA256 签名

**建议：**

- 生产环境必须使用强密钥 (至少 32 字节)
- 考虑实现 Token 黑名单机制
- 监控异常登录行为

### 密码存储

- 使用 bcrypt 加密存储
- Cost 因子：10 (默认)

**建议：**

- 根据服务器性能调整 cost 因子
- 实施密码强度策略
- 考虑添加登录尝试限制

### 数据库

- 支持软删除，已删除数据仍在数据库中
- 使用 GORM 自动转义，防止 SQL 注入

**建议：**

- 生产环境启用 SSL 连接
- 使用数据库审计日志
- 定期清理软删除数据

## 安全更新

关注以下渠道获取安全更新：

- [GitHub Releases](https://github.com/lwmacct/260103-ddd-iam-bc/releases)
- [GitHub Security Advisories](https://github.com/lwmacct/260103-ddd-iam-bc/security/advisories)

## 致谢

感谢所有报告安全问题的贡献者，我们会在修复后在此处致谢。

---

最后更新：2025-11-18
